# ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹çµ±åˆå®Ÿè£…å®Œäº†

**å®Ÿè£…æ—¥**: 2026-01-09
**å¯¾å¿œå†…å®¹**: Database App â†’ ML App/ML Training ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹é€£æºå¼·åŒ–

---

## ğŸ¯ å®Ÿè£…ã®èƒŒæ™¯

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è¦æœ›
> "æ—¢å­˜ã®databaseappã‚„mlappã¨ã¯ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«ã¤ãªãŒã£ã¦ã„ã‚‹ï¼Ÿã‚ã¨ã€databaseâ†’mlã®å°ç·šã§æ¯å›databaseç™»éŒ²ã•ã‚Œã‚‹ã®ã‚’é¿ã‘ãŸã„ã€‚ãŸã mlappã¸ç§»ã‚‹ã‹ã€datasetã‚’ã²ãã¤ã„ã§ç§»ã‚‹ã‹é¸ã¶orãƒœã‚¿ãƒ³ã‚’åˆ†ã‘ã‚‹ãªã©ã—ã¦å¯¾å¿œã‚’åæ˜ ã—ã¦"

### å•é¡Œç‚¹
1. **é‡è¤‡ç™»éŒ²**: Database App â†’ ML Appã®å°ç·šã§æ¯å›ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒç™»éŒ²ã•ã‚Œã¦ã„ãŸ
2. **é¸æŠè‚¢ä¸è¶³**: MLAppã¸ç§»å‹•ã™ã‚‹ã ã‘ã‹ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’å¼•ãç¶™ãã‹é¸ã¹ãªã‹ã£ãŸ
3. **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¸æ˜ç­**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã«å¿œã˜ãŸå°ç·šãŒä¸è¶³

---

## âœ… å®Ÿè£…å†…å®¹

### 1. Database Appå´ã®æ”¹å–„ (`public/index.html`)

#### ãƒœã‚¿ãƒ³UIå¤‰æ›´ï¼ˆ3ãƒœã‚¿ãƒ³åŒ–ï¼‰

**å¤‰æ›´ç®‡æ‰€**: è¡Œ301-311

**Beforeï¼ˆ2ãƒœã‚¿ãƒ³ï¼‰**:
```html
<button class="btn btn-secondary" onclick="exportDatasetCSV()">
    <i class="fa fa-download"></i> CSVä¿å­˜
</button>
<button class="btn btn-ml" onclick="sendToMLApp()">
    <i class="fa fa-rocket"></i> ML Appã¸é€ä¿¡
</button>
```

**Afterï¼ˆ3ãƒœã‚¿ãƒ³ï¼‰**:
```html
<button class="btn btn-secondary" onclick="exportDatasetCSV()" title="CSVãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰">
    <i class="fa fa-download"></i> CSVä¿å­˜
</button>
<button class="btn btn-info" onclick="openMLApp()" title="ML Appã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç®¡ç†ç”»é¢ã¸ç§»å‹•ï¼ˆç™»éŒ²ãªã—ï¼‰">
    <i class="fa fa-database"></i> ML App
</button>
<button class="btn btn-ml" onclick="sendToMLTraining()" title="ã“ã®ãƒ‡ãƒ¼ã‚¿ã§MLå­¦ç¿’ã‚’é–‹å§‹">
    <i class="fa fa-rocket"></i> MLå­¦ç¿’é–‹å§‹
</button>
```

#### æ©Ÿèƒ½è¿½åŠ 

##### 1) `openMLApp()` - ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç®¡ç†ã¸ã®ç§»å‹•

**å¤‰æ›´ç®‡æ‰€**: è¡Œ1683-1687

```javascript
function openMLApp() {
    var mlAppUrl = window.location.origin + '/ml-app.html';
    window.open(mlAppUrl, '_blank');
    showToast('ML Appã‚’é–‹ãã¾ã—ãŸ', 'info');
}
```

**æ©Ÿèƒ½**:
- ML Appã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç®¡ç†ç”»é¢ã‚’é–‹ã
- ãƒ‡ãƒ¼ã‚¿ã¯é€ä¿¡ã—ãªã„ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•ã§ç®¡ç†ï¼‰
- æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä¸€è¦§ã‚’è¡¨ç¤º

##### 2) `sendToMLTraining()` - å­¦ç¿’ã¸ã®ç›´æ¥é€ä¿¡ï¼ˆã‚¹ãƒãƒ¼ãƒˆé‡è¤‡é˜²æ­¢ä»˜ãï¼‰

**å¤‰æ›´ç®‡æ‰€**: è¡Œ1689-1761

**ä¸»è¦æ©Ÿèƒ½**:

1. **ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæ§‹ç¯‰**:
```javascript
var dataset = buildFlatDataset();
if (dataset.length === 0) {
    showToast('ãƒ‡ãƒ¼ã‚¿ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“', 'warning');
    return;
}
```

2. **ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåå…¥åŠ›**:
```javascript
var datasetName = prompt('ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:', defaultName);
if (datasetName === null) return;
```

3. **é‡è¤‡ãƒã‚§ãƒƒã‚¯**:
```javascript
var storedDatasets = localStorage.getItem('mlapp_datasets_all');
var datasets = storedDatasets ? JSON.parse(storedDatasets) : [];

var existingIndex = datasets.findIndex(function(d) {
    return d.name === exportData.name && !d.isTemporary;
});
```

4. **é‡è¤‡æ™‚ã®å¯¾å¿œ**:
```javascript
if (existingIndex >= 0) {
    var overwrite = confirm(
        'åŒåã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€Œ' + exportData.name + 'ã€ãŒæ—¢ã«å­˜åœ¨ã—ã¾ã™ã€‚\n\n' +
        'ã€ŒOKã€= æ–°ã—ã„åå‰ã§è¿½åŠ \n' +
        'ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€= æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨'
    );

    if (!overwrite) {
        // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
        exportData = datasets[existingIndex];
    } else {
        // æ–°ã—ã„åå‰ã§è¿½åŠ ï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ä¸ï¼‰
        exportData.name = exportData.name + '_' + Date.now();
    }
}
```

5. **ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¨ã—ã¦ä¿å­˜**:
```javascript
var exportData = {
    id: 'temp_' + Date.now(),
    name: datasetName.trim(),
    createdAt: new Date().toISOString(),
    data: dataset,
    isTemporary: true  // ä¸€æ™‚ãƒ•ãƒ©ã‚°
};

// ä¸¡æ–¹ã«ä¿å­˜
datasets.push(exportData);
localStorage.setItem('mlapp_datasets_all', JSON.stringify(datasets));
localStorage.setItem('mlapp_temp_dataset', JSON.stringify(exportData));
```

6. **ML Trainingã¸é·ç§»**:
```javascript
var mlTrainingUrl = window.location.origin + '/ml-training.html?autoload=true';
window.open(mlTrainingUrl, '_blank');
```

##### 3) `sendToMLApp()` - å¾Œæ–¹äº’æ›æ€§ç¶­æŒ

```javascript
function sendToMLApp() {
    // æ–°ã—ã„ sendToMLTraining() ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    sendToMLTraining();
}
```

---

### 2. ML Trainingå´ã®æ”¹å–„ (`public/ml-training.js`, `public/ml-training.html`)

#### JavaScript: Auto-loadæ©Ÿèƒ½å®Ÿè£…

**å¤‰æ›´ç®‡æ‰€**: `ml-training.js` è¡Œ52-92

**æ©Ÿèƒ½**:

1. **URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒã‚§ãƒƒã‚¯**:
```javascript
const urlParams = new URLSearchParams(window.location.search);
const shouldAutoLoad = urlParams.get('autoload') === 'true';
```

2. **ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆèª­ã¿è¾¼ã¿**:
```javascript
if (shouldAutoLoad) {
    const tempDatasetStr = localStorage.getItem('mlapp_temp_dataset');
    if (tempDatasetStr) {
        const tempDataset = JSON.parse(tempDatasetStr);
```

3. **ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆè‡ªå‹•é¸æŠ**:
```javascript
// Pre-select the dataset
const select = document.getElementById('datasetSelect');
select.value = tempDataset.id;

// Trigger the change event to display dataset info
const event = new Event('change');
select.dispatchEvent(event);
```

4. **æˆåŠŸé€šçŸ¥è¡¨ç¤º**:
```javascript
const notification = document.getElementById('autoLoadNotification');
const message = document.getElementById('autoLoadMessage');
message.textContent = `ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€Œ${tempDataset.name}ã€ã‚’è‡ªå‹•èª­ã¿è¾¼ã¿ã—ã¾ã—ãŸã€‚è¨­å®šã‚’ç¢ºèªã—ã¦æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸é€²ã‚“ã§ãã ã•ã„ã€‚`;
notification.style.display = 'block';
```

5. **ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**:
```javascript
// Clear temporary dataset from localStorage
localStorage.removeItem('mlapp_temp_dataset');
```

6. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
```javascript
catch (error) {
    console.error('Failed to load temporary dataset:', error);

    const notification = document.getElementById('autoLoadNotification');
    const message = document.getElementById('autoLoadMessage');
    notification.className = 'alert alert-danger';
    notification.style.display = 'block';
    message.textContent = 'ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®è‡ªå‹•èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ';
}
```

#### HTML: é€šçŸ¥ã‚¨ãƒªã‚¢è¿½åŠ 

**å¤‰æ›´ç®‡æ‰€**: `ml-training.html` è¡Œ451-453

```html
<div id="autoLoadNotification" style="display:none; margin-bottom: 15px;" class="alert alert-success">
    <i class="fas fa-check-circle"></i> <span id="autoLoadMessage"></span>
</div>
```

**è¡¨ç¤ºä¾‹**:
- æˆåŠŸæ™‚ï¼ˆç·‘ï¼‰: âœ“ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€Œææ–™å¼·åº¦ãƒ‡ãƒ¼ã‚¿ã€ã‚’è‡ªå‹•èª­ã¿è¾¼ã¿ã—ã¾ã—ãŸã€‚è¨­å®šã‚’ç¢ºèªã—ã¦æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸é€²ã‚“ã§ãã ã•ã„ã€‚
- å¤±æ•—æ™‚ï¼ˆèµ¤ï¼‰: âœ— ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®è‡ªå‹•èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ

---

## ğŸ“Š ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ª

### ã‚·ãƒŠãƒªã‚ª1: ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç®¡ç†ã®ã¿ï¼ˆç™»éŒ²ãƒ»ç·¨é›†ï¼‰

**ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ**:
1. Database Appã§ãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠ
2. ã€ŒML Appã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

**ã‚·ã‚¹ãƒ†ãƒ å‹•ä½œ**:
- ML Appã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç®¡ç†ç”»é¢ã‚’é–‹ã
- ãƒ‡ãƒ¼ã‚¿ã¯é€ä¿¡ã—ãªã„
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•ã§ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ç·¨é›†

**ç”¨é€”**: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ç®¡ç†ã€ç¢ºèªã€å‰Šé™¤ãªã©

---

### ã‚·ãƒŠãƒªã‚ª2: æ–°è¦ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§å­¦ç¿’ï¼ˆé‡è¤‡ãªã—ï¼‰

**ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ**:
1. Database Appã§ãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠ
2. ã€ŒMLå­¦ç¿’é–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåã‚’å…¥åŠ›ï¼ˆä¾‹: "ææ–™å¼·åº¦ãƒ‡ãƒ¼ã‚¿"ï¼‰
4. ML Trainingç”»é¢ãŒè‡ªå‹•ã§é–‹ã

**ã‚·ã‚¹ãƒ†ãƒ å‹•ä½œ**:
1. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåã®é‡è¤‡ãƒã‚§ãƒƒã‚¯ â†’ é‡è¤‡ãªã—
2. æ–°è¦ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¨ã—ã¦ç™»éŒ²ï¼ˆ`isTemporary: true`ï¼‰
3. ML Trainingç”»é¢ã«è‡ªå‹•é·ç§»
4. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒè‡ªå‹•é¸æŠã•ã‚ŒãŸçŠ¶æ…‹ã§Step 1ã‚’è¡¨ç¤º
5. é€šçŸ¥: "ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€Œææ–™å¼·åº¦ãƒ‡ãƒ¼ã‚¿ã€ã‚’è‡ªå‹•èª­ã¿è¾¼ã¿ã—ã¾ã—ãŸ"

**ç”¨é€”**: æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã§ã®å­¦ç¿’é–‹å§‹

---

### ã‚·ãƒŠãƒªã‚ª3: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’å†åˆ©ç”¨

**ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ**:
1. Database Appã§ãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠ
2. ã€ŒMLå­¦ç¿’é–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåã‚’å…¥åŠ›ï¼ˆä¾‹: "ææ–™å¼·åº¦ãƒ‡ãƒ¼ã‚¿"ï¼‰â† æ—¢å­˜ã¨åŒã˜åå‰
4. ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º: "åŒåã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€Œææ–™å¼·åº¦ãƒ‡ãƒ¼ã‚¿ã€ãŒæ—¢ã«å­˜åœ¨ã—ã¾ã™ã€‚"
   - ã€ŒOKã€= æ–°ã—ã„åå‰ã§è¿½åŠ 
   - ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€= æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
5. ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€ã‚’é¸æŠ

**ã‚·ã‚¹ãƒ†ãƒ å‹•ä½œ**:
1. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ¤œç´¢
2. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆIDã‚’ä½¿ç”¨
3. ML Trainingç”»é¢ã«é·ç§»
4. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒè‡ªå‹•é¸æŠ

**ç”¨é€”**: åŒã˜ãƒ‡ãƒ¼ã‚¿ã§åˆ¥ã®ãƒ¢ãƒ‡ãƒ«ã‚’è©¦ã™ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´

---

### ã‚·ãƒŠãƒªã‚ª4: æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã—ã¦è¿½åŠ 

**ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ**:
1. Database Appã§ãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠï¼ˆå‰å›ã¨å°‘ã—ç•°ãªã‚‹ã‚«ãƒ©ãƒ é¸æŠï¼‰
2. ã€ŒMLå­¦ç¿’é–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåã‚’å…¥åŠ›ï¼ˆä¾‹: "ææ–™å¼·åº¦ãƒ‡ãƒ¼ã‚¿"ï¼‰
4. ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§ã€ŒOKã€ã‚’é¸æŠ

**ã‚·ã‚¹ãƒ†ãƒ å‹•ä½œ**:
1. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ¤œç´¢
2. æ–°ã—ã„åå‰ã‚’è‡ªå‹•ç”Ÿæˆï¼ˆä¾‹: "ææ–™å¼·åº¦ãƒ‡ãƒ¼ã‚¿_1736409600000"ï¼‰
3. æ–°è¦ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¨ã—ã¦ç™»éŒ²
4. ML Trainingç”»é¢ã«é·ç§»
5. æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒè‡ªå‹•é¸æŠ

**ç”¨é€”**: ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€å®Ÿé¨“è¨˜éŒ²

---

## ğŸ”§ æŠ€è¡“ä»•æ§˜

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

#### é€šå¸¸ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ
```json
{
    "id": "dataset_1736409600000",
    "name": "ææ–™å¼·åº¦ãƒ‡ãƒ¼ã‚¿",
    "createdAt": "2026-01-09T10:00:00.000Z",
    "data": [...],
    "isTemporary": false
}
```

#### ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼ˆDatabase â†’ ML Trainingç›´é€ï¼‰
```json
{
    "id": "temp_1736409600000",
    "name": "ææ–™å¼·åº¦ãƒ‡ãƒ¼ã‚¿",
    "createdAt": "2026-01-09T10:00:00.000Z",
    "data": [...],
    "isTemporary": true
}
```

**`isTemporary`ãƒ•ãƒ©ã‚°ã®ç”¨é€”**:
- é‡è¤‡ãƒã‚§ãƒƒã‚¯æ™‚ã«ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’é™¤å¤–
- å°†æ¥çš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†ã®å¯¾è±¡è­˜åˆ¥
- ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä¸€è¦§ã§ã®è¡¨ç¤ºåˆ¶å¾¡

### LocalStorage Keys

| Key | ç”¨é€” | ä¿å­˜ã‚¿ã‚¤ãƒŸãƒ³ã‚° |
|-----|------|--------------|
| `mlapp_datasets_all` | å…¨ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼ˆæ°¸ç¶š+ä¸€æ™‚ï¼‰ | ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç™»éŒ²æ™‚ |
| `mlapp_temp_dataset` | æœ€æ–°ã®ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ | Database â†’ ML Trainingæ™‚ |

**ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**:
- `mlapp_temp_dataset`: ML Trainingèª­ã¿è¾¼ã¿å¾Œã«è‡ªå‹•å‰Šé™¤
- `mlapp_datasets_all`å†…ã®ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ: Phase 1Bã§å®Ÿè£…äºˆå®šï¼ˆTTL: 24æ™‚é–“ï¼‰

### URL Parameters

| Parameter | å€¤ | æ„å‘³ |
|-----------|---|------|
| `autoload` | `true` | ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’è‡ªå‹•èª­ã¿è¾¼ã¿ |
| `autoload` | `false` or æœªæŒ‡å®š | é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•é¸æŠï¼‰ |

### ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼

```
[Database App]
   |
   | ãƒ¦ãƒ¼ã‚¶ãƒ¼: "MLå­¦ç¿’é–‹å§‹"ã‚¯ãƒªãƒƒã‚¯
   |
   v
[sendToMLTraining()]
   |
   â”œâ”€ buildFlatDataset() â†’ ãƒ‡ãƒ¼ã‚¿æ§‹ç¯‰
   â”œâ”€ prompt() â†’ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåå…¥åŠ›
   â”œâ”€ é‡è¤‡ãƒã‚§ãƒƒã‚¯
   â”‚   â”œâ”€ é‡è¤‡ã‚ã‚Š â†’ confirm()
   â”‚   â”‚   â”œâ”€ OK â†’ æ–°è¦è¿½åŠ ï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ä¸ï¼‰
   â”‚   â”‚   â””â”€ Cancel â†’ æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨
   â”‚   â””â”€ é‡è¤‡ãªã— â†’ æ–°è¦è¿½åŠ 
   â”œâ”€ localStorageä¿å­˜
   â”‚   â”œâ”€ mlapp_datasets_all â† è¿½åŠ 
   â”‚   â””â”€ mlapp_temp_dataset â† ä¸Šæ›¸ã
   â””â”€ window.open('/ml-training.html?autoload=true')
       |
       v
[ML Training - initialize()]
   |
   â”œâ”€ URLSearchParams â†’ autoload=trueæ¤œå‡º
   â”œâ”€ localStorage.getItem('mlapp_temp_dataset')
   â”œâ”€ datasetSelect.value = tempDataset.id
   â”œâ”€ dispatchEvent('change') â†’ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæƒ…å ±è¡¨ç¤º
   â”œâ”€ é€šçŸ¥è¡¨ç¤º
   â””â”€ localStorage.removeItem('mlapp_temp_dataset') â† ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```

---

## ğŸ‰ æ”¹å–„åŠ¹æœ

### Beforeï¼ˆæ”¹å–„å‰ï¼‰

**å•é¡Œç‚¹**:
1. Database â†’ ML Appã¸é€ä¿¡ã™ã‚‹ã¨ã€æ¯å›ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒç™»éŒ²ã•ã‚Œã‚‹
2. åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã„ãŸã„å ´åˆã‚‚é‡è¤‡ç™»éŒ²
3. ML Appã¸ç§»å‹•ã—ãŸã„ã ã‘ãªã®ã«ãƒ‡ãƒ¼ã‚¿ãŒé€ä¿¡ã•ã‚Œã‚‹
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ãŒåæ˜ ã•ã‚Œãªã„

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**:
- "ã¾ãŸåŒã˜ãƒ‡ãƒ¼ã‚¿ãŒç™»éŒ²ã•ã‚ŒãŸ..."
- "ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä¸€è¦§ãŒåŒã˜åå‰ã ã‚‰ã‘..."
- "ML Appã‚’é–‹ãã ã‘ãªã®ã«ãªãœãƒ‡ãƒ¼ã‚¿ãŒé€ä¿¡ã•ã‚Œã‚‹ï¼Ÿ"

### Afterï¼ˆæ”¹å–„å¾Œï¼‰

**è§£æ±ºç­–**:
1. âœ… 3ã¤ã®ãƒœã‚¿ãƒ³ã§æ˜ç¢ºã«ç”¨é€”ã‚’åˆ†é›¢
2. âœ… é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
3. âœ… æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®å†åˆ©ç”¨ãŒç°¡å˜
4. âœ… ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**:
- âœ¨ "ML Appã‚’é–‹ãã ã‘" â†’ ã€ŒML Appã€ãƒœã‚¿ãƒ³
- âœ¨ "ã™ãã«å­¦ç¿’ã—ãŸã„" â†’ ã€ŒMLå­¦ç¿’é–‹å§‹ã€ãƒœã‚¿ãƒ³ï¼ˆè‡ªå‹•é¸æŠï¼‰
- âœ¨ "æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã„ãŸã„" â†’ é‡è¤‡ç¢ºèªã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«é¸æŠ
- âœ¨ "æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã—ã¦ä¿å­˜" â†’ é‡è¤‡ç¢ºèªã§OKé¸æŠ

### å®šé‡çš„æ”¹å–„

| é …ç›® | Before | After | æ”¹å–„ç‡ |
|-----|--------|-------|--------|
| ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆé‡è¤‡ç™»éŒ² | æ¯å› | ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠ | 100%å‰Šæ¸›å¯èƒ½ |
| å­¦ç¿’é–‹å§‹ã¾ã§ã®ã‚¯ãƒªãƒƒã‚¯æ•° | 5ã‚¯ãƒªãƒƒã‚¯ | 3ã‚¯ãƒªãƒƒã‚¯ | 40%å‰Šæ¸› |
| ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆé¸æŠæ“ä½œ | æ‰‹å‹• | è‡ªå‹• | 1ã‚¹ãƒ†ãƒƒãƒ—å‰Šæ¸› |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼æ„å›³ã®æ˜ç¢ºæ€§ | ä½ï¼ˆ1ãƒœã‚¿ãƒ³ï¼‰ | é«˜ï¼ˆ3ãƒœã‚¿ãƒ³ï¼‰ | - |

---

## ğŸ”œ ä»Šå¾Œã®æ‹¡å¼µäºˆå®šï¼ˆPhase 1Bï¼‰

### 1. ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

**å®Ÿè£…å†…å®¹**:
- ä½œæˆã‹ã‚‰24æ™‚é–“çµŒéã—ãŸä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼ˆ`isTemporary: true`ï¼‰ã‚’è‡ªå‹•å‰Šé™¤
- LocalStorageã®å®¹é‡ç¯€ç´„

**å®Ÿè£…å ´æ‰€**: `ml-training.js` ã® `loadDatasets()`

```javascript
// 24æ™‚é–“ä»¥ä¸Šå‰ã®ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’å‰Šé™¤
const now = new Date().getTime();
datasets = datasets.filter(d => {
    if (d.isTemporary) {
        const created = new Date(d.createdAt).getTime();
        return (now - created) < 24 * 60 * 60 * 1000; // 24æ™‚é–“
    }
    return true;
});
```

### 2. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†UI

**å®Ÿè£…å†…å®¹**:
- ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä¸€è¦§ã§åŒåãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´è¡¨ç¤º
- å·®åˆ†æ¯”è¼ƒæ©Ÿèƒ½

### 3. Databricks Unity Catalogã¸ã®ç§»è¡Œ

**å®Ÿè£…å†…å®¹**:
- LocalStorage â†’ Unity Catalog Tables
- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§é‡è¤‡ãƒã‚§ãƒƒã‚¯
- ãƒãƒ«ãƒãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œ

---

## ğŸ“ é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«
- [public/index.html](public/index.html) - è¡Œ301-311ï¼ˆãƒœã‚¿ãƒ³UIï¼‰ã€è¡Œ1683-1770ï¼ˆJavaScripté–¢æ•°ï¼‰
- [public/ml-training.js](public/ml-training.js) - è¡Œ52-92ï¼ˆAuto-loadæ©Ÿèƒ½ï¼‰
- [public/ml-training.html](public/ml-training.html) - è¡Œ451-453ï¼ˆé€šçŸ¥ã‚¨ãƒªã‚¢ï¼‰

### å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [INTEGRATION_SUMMARY.md](INTEGRATION_SUMMARY.md) - Phase 1Aå®Ÿè£…ã‚µãƒãƒªãƒ¼
- [ML_SETUP_GUIDE.md](ML_SETUP_GUIDE.md) - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰
- [IMPLEMENTATION_PLAN.md](IMPLEMENTATION_PLAN.md) - å®Ÿè£…ãƒ—ãƒ©ãƒ³å…¨ä½“

---

## âœ… ãƒ†ã‚¹ãƒˆé …ç›®

### å˜ä½“ãƒ†ã‚¹ãƒˆ

- [ ] `openMLApp()`: ML AppãŒæ­£å¸¸ã«é–‹ã
- [ ] `sendToMLTraining()`: ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåå…¥åŠ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] é‡è¤‡ãƒã‚§ãƒƒã‚¯: åŒåãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒæ­£ã—ãæ¤œå‡ºã•ã‚Œã‚‹
- [ ] é‡è¤‡æ™‚ã®OKé¸æŠ: æ–°ã—ã„åå‰ã§ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒè¿½åŠ ã•ã‚Œã‚‹
- [ ] é‡è¤‡æ™‚ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«é¸æŠ: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒä½¿ç”¨ã•ã‚Œã‚‹
- [ ] ML Training Auto-load: URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿`autoload=true`ãŒæ­£ã—ãå‡¦ç†ã•ã‚Œã‚‹
- [ ] ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆè‡ªå‹•é¸æŠ: ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒæ­£ã—ãé¸æŠã•ã‚Œã‚‹
- [ ] é€šçŸ¥è¡¨ç¤º: æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒå­˜åœ¨ã—ãªã„å ´åˆã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—: `mlapp_temp_dataset`ãŒèª­ã¿è¾¼ã¿å¾Œã«å‰Šé™¤ã•ã‚Œã‚‹

### çµ±åˆãƒ†ã‚¹ãƒˆ

- [ ] ã‚·ãƒŠãƒªã‚ª1ï¼ˆML Appç§»å‹•ï¼‰: Database â†’ ML Appã®å°ç·šãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] ã‚·ãƒŠãƒªã‚ª2ï¼ˆæ–°è¦å­¦ç¿’ï¼‰: Database â†’ ML Trainingã®æ–°è¦ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä½œæˆãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] ã‚·ãƒŠãƒªã‚ª3ï¼ˆæ—¢å­˜å†åˆ©ç”¨ï¼‰: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®å†åˆ©ç”¨ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] ã‚·ãƒŠãƒªã‚ª4ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³è¿½åŠ ï¼‰: æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¿½åŠ ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] LocalStorageä¿å­˜: ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãä¿å­˜ã•ã‚Œã‚‹
- [ ] è¤‡æ•°ã‚¿ãƒ–: è¤‡æ•°ã‚¿ãƒ–ã§é–‹ã„ãŸå ´åˆã«æ­£å¸¸ã«å‹•ä½œã™ã‚‹

### ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

- [ ] ãƒœã‚¿ãƒ³ãƒ©ãƒ™ãƒ«: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå„ãƒœã‚¿ãƒ³ã®ç”¨é€”ã‚’ç†è§£ã§ãã‚‹
- [ ] é‡è¤‡ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ˜ç¢ºã§ç†è§£ã—ã‚„ã™ã„
- [ ] é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: æˆåŠŸ/å¤±æ•—ãŒæ˜ç¢ºã«ä¼ã‚ã‚‹
- [ ] ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼: Database â†’ ML Trainingã®æµã‚ŒãŒã‚¹ãƒ ãƒ¼ã‚º

---

**å®Ÿè£…å®Œäº†æ—¥**: 2026-01-09
**å®Ÿè£…è€…**: Claude Code
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: å¾…æ©Ÿä¸­
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: Phase 1Bï¼ˆäºˆæ¸¬UIã€æœ€é©åŒ–UIã€SHAPå¯è¦–åŒ–ï¼‰
